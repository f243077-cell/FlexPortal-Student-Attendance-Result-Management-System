<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Student Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>Admin Portal</h2>
                <p>Welcome, <span id="adminName">Administrator</span></p>
            </div>
            
            <ul class="sidebar-menu">
                <li><a href="#" class="menu-item active" data-section="dashboard">Dashboard</a></li>
                <li><a href="#" class="menu-item" data-section="users">User Management</a></li>
                <li><a href="#" class="menu-item" data-section="courses">Course Management</a></li>
                <li><a href="#" class="menu-item" data-section="system">System Settings</a></li>
                <li><a href="#" class="menu-item" data-section="reports">System Reports</a></li>
                <li><a href="#" id="logoutBtn" class="menu-item logout">Logout</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <header class="top-header">
                <h1>Admin Dashboard</h1>
                <div class="user-info">
                    <span id="currentDate"></span>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="content-section active">
                <div class="dashboard-cards">
                    <div class="card">
                        <div class="card-header">
                            <h3>System Overview</h3>
                        </div>
                        <div class="card-body">
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <span class="stat-value" id="totalStudents">0</span>
                                    <span class="stat-label">Total Students</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="totalTeachers">0</span>
                                    <span class="stat-label">Total Teachers</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="totalCourses">0</span>
                                    <span class="stat-label">Active Courses</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value" id="systemUptime">99.8%</span>
                                    <span class="stat-label">System Uptime</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Recent System Activity</h3>
                        </div>
                        <div class="card-body">
                            <div id="systemActivity" class="activity-list">
                                <div class="activity-item">
                                    <span class="activity-time">1 hour ago</span>
                                    <span class="activity-text">New student registered</span>
                                </div>
                                <div class="activity-item">
                                    <span class="activity-time">3 hours ago</span>
                                    <span class="activity-text">Course created successfully</span>
                                </div>
                                <div class="activity-item">
                                    <span class="activity-time">6 hours ago</span>
                                    <span class="activity-text">System backup completed</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card alerts-card">
                        <div class="card-header">
                            <h3>System Alerts</h3>
                        </div>
                        <div class="card-body">
                            <div id="systemAlerts" class="alerts-list">
                                <div class="alert-item info">
                                    <span class="alert-icon">ℹ️</span>
                                    <span class="alert-text">System running normally</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- User Management Section -->
            <section id="users-section" class="content-section">
                <div class="section-header">
                    <h2>User Management</h2>
                    <button class="btn btn-primary" onclick="showAddUserModal()">Add New User</button>
                </div>
                
                <div class="users-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>All Users</h3>
                            <div class="user-filters">
                                <select id="userRoleFilter" class="form-control">
                                    <option value="">All Roles</option>
                                    <option value="student">Students</option>
                                    <option value="teacher">Teachers</option>
                                    <option value="admin">Admins</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="users-table">
                                <table id="usersTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Role</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTableBody">
                                        <!-- Users will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Course Management Section -->
            <section id="courses-section" class="content-section">
                <div class="section-header">
                    <h2>Course Management</h2>
                    <button class="btn btn-primary" onclick="showAddCourseModal()">Add New Course</button>
                </div>
                
                <div class="courses-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Active Courses</h3>
                        </div>
                        <div class="card-body">
                            <div class="courses-table">
                                <table id="coursesTable">
                                    <thead>
                                        <tr>
                                            <th>Course Code</th>
                                            <th>Course Name</th>
                                            <th>Teacher</th>
                                            <th>Students</th>
                                            <th>Credits</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="coursesTableBody">
                                        <!-- Courses will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- System Settings Section -->
            <section id="system-section" class="content-section">
                <div class="section-header">
                    <h2>System Settings</h2>
                </div>
                
                <div class="settings-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Attendance Settings</h3>
                        </div>
                        <div class="card-body">
                            <div class="setting-item">
                                <label for="attendanceThreshold">Attendance Alert Threshold (%)</label>
                                <input type="number" id="attendanceThreshold" class="form-control" value="75" min="0" max="100">
                            </div>
                            <div class="setting-item">
                                <label for="attendanceCheckInterval">Check Interval (hours)</label>
                                <input type="number" id="attendanceCheckInterval" class="form-control" value="6" min="1" max="24">
                            </div>
                            <button class="btn btn-primary" onclick="saveAttendanceSettings()">Save Settings</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Grade Settings</h3>
                        </div>
                        <div class="card-body">
                            <div class="setting-item">
                                <label for="passingGrade">Passing Grade (%)</label>
                                <input type="number" id="passingGrade" class="form-control" value="60" min="0" max="100">
                            </div>
                            <div class="grade-scale">
                                <h4>Grade Scale</h4>
                                <div class="grade-item"><span>A: 90-100%</span></div>
                                <div class="grade-item"><span>B: 80-89%</span></div>
                                <div class="grade-item"><span>C: 70-79%</span></div>
                                <div class="grade-item"><span>D: 60-69%</span></div>
                                <div class="grade-item"><span>F: Below 60%</span></div>
                            </div>
                            <button class="btn btn-primary" onclick="saveGradeSettings()">Save Settings</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>System Maintenance</h3>
                        </div>
                        <div class="card-body">
                            <div class="maintenance-actions">
                                <button class="btn btn-secondary" onclick="backupDatabase()">Backup Database</button>
                                <button class="btn btn-outline" onclick="clearCache()">Clear Cache</button>
                                <button class="btn btn-danger" onclick="systemMaintenance()">System Maintenance</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports-section" class="content-section">
                <div class="section-header">
                    <h2>System Reports</h2>
                </div>
                
                <div class="reports-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Generate System Reports</h3>
                        </div>
                        <div class="card-body">
                            <div class="report-options">
                                <div class="form-group">
                                    <label for="systemReportType">Report Type</label>
                                    <select id="systemReportType" class="form-control">
                                        <option value="">Select report type</option>
                                        <option value="user-activity">User Activity Report</option>
                                        <option value="system-performance">System Performance Report</option>
                                        <option value="attendance-summary">Attendance Summary</option>
                                        <option value="grade-analysis">Grade Analysis Report</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="reportDateRange">Date Range</label>
                                    <select id="reportDateRange" class="form-control">
                                        <option value="today">Today</option>
                                        <option value="week">This Week</option>
                                        <option value="month">This Month</option>
                                        <option value="semester">This Semester</option>
                                    </select>
                                </div>
                                
                                <div class="form-actions">
                                    <button class="btn btn-primary" onclick="generateSystemReport()">Generate & Download Report</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New User</h3>
                <span class="close" onclick="closeAddUserModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="form-group">
                        <label for="newUserName">Full Name *</label>
                        <input type="text" id="newUserName" name="newUserName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="newUserEmail">Email *</label>
                        <input type="email" id="newUserEmail" name="newUserEmail" class="form-control" placeholder="user@university.edu" required>
                    </div>
                    <div class="form-group">
                        <label for="newUserRole">Role *</label>
                        <select id="newUserRole" name="newUserRole" class="form-control" required>
                            <option value="">Select Role</option>
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="newUserPassword">Password *</label>
                        <input type="password" id="newUserPassword" name="newUserPassword" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="newUserProgram">Program</label>
                        <input type="text" id="newUserProgram" name="newUserProgram" class="form-control" placeholder="e.g., Computer Science">
                    </div>
                    <div class="form-group">
                        <label for="newUserSemester">Semester</label>
                        <input type="text" id="newUserSemester" name="newUserSemester" class="form-control" placeholder="e.g., Fall 2025">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Add User</button>
                        <button type="button" class="btn btn-secondary" onclick="closeAddUserModal()">Cancel</button>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.875rem; color: #718096;">
                        <strong>Note:</strong> Students will be automatically enrolled in all courses.
                    </p>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Course Modal -->
    <div id="addCourseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Course</h3>
                <span class="close" onclick="closeAddCourseModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addCourseForm">
                    <div class="form-group">
                        <label for="newCourseCode">Course Code *</label>
                        <input type="text" id="newCourseCode" name="newCourseCode" class="form-control" placeholder="e.g., CS-301" required>
                    </div>
                    <div class="form-group">
                        <label for="newCourseName">Course Name *</label>
                        <input type="text" id="newCourseName" name="newCourseName" class="form-control" placeholder="e.g., Data Structures" required>
                    </div>
                    <div class="form-group">
                        <label for="newCourseTeacher">Assign Teacher *</label>
                        <select id="newCourseTeacher" name="newCourseTeacher" class="form-control" required>
                            <option value="">Select Teacher</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="newCourseCredits">Credits *</label>
                        <input type="number" id="newCourseCredits" name="newCourseCredits" class="form-control" required min="1" max="6" value="3">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Add Course</button>
                        <button type="button" class="btn btn-secondary" onclick="closeAddCourseModal()">Cancel</button>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.875rem; color: #718096;">
                        <strong>Note:</strong> All students will be automatically enrolled in this course.
                    </p>
                </form>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="main.js"></script>
    <script src="admin.js"></script>
</body>
</html>